<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ALib: IDE/Project Setup of ALib for C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="aworx_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="A-Worx-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ALib
   &#160;<span id="projectnumber">V. 1805 R. 0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IDE/Project Setup of ALib for C++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#alib_man_setup_intro">1. Introduction</a></li>
<li class="level1"><a href="#alib_man_setup_test">2. Performing A Test Compilation</a></li>
<li class="level1"><a href="#alib_man_setup_sample">3. A Step-By-Step CMake Sample</a></li>
<li class="level1"><a href="#alib_man_setup_cmake">4. The Build Process In Detail</a><ul><li class="level2"><a href="#alib_man_setup_cmake_1">4.1  Selecting ALib Modules</a></li>
<li class="level2"><a href="#alib_man_setup_cmake_2">4.2  Variables For Directory and Source Code Definitions</a></li>
<li class="level2"><a href="#alib_man_setup_cmake_3">4.3  Cached CMake Variables For Compilation Symbols</a></li>
<li class="level2"><a href="#alib_man_setup_cmake_4">4.4  CMake Build-Setting Variables</a></li>
<li class="level2"><a href="#alib_man_setup_cmake_5">4.5  CMake Functions Defined By The Script</a></li>
<li class="level2"><a href="#alib_man_setup_cmake_6">4.6  Library Filename</a></li>
</ul>
</li>
<li class="level1"><a href="#alib_man_setup_more">5. More Information</a><ul><li class="level2"><a href="#alib_man_setup_compat">5.1 Assuring Compilation Compatibility</a></li>
<li class="level2"><a href="#alib_man_setup_cppversion">5.2 Choosing C++ Language Version</a></li>
<li class="level2"><a href="#alib_man_setup_copysources">5.3 Copying The Sources</a></li>
<li class="level2"><a href="#alib_man_setup_cotire">5.4 Using Cotire To Speed-Up Builds</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="alib_man_setup_intro"></a>
1. Introduction</h1>
<p>As of today, no system installation process of a shared library version of <b>ALib</b> is available with the build process defined. This has of-course the disadvantage, that every software project needs to compile its own version of the library, and the library is by default not shared between applications, even if compiled as a "shared library", respectively DLL.</p>
<p>While this may change in the future, the advantage of this approach is that an application has a lot flexibility in respect to compiling <b>ALib</b> using the exact set of features it desires.</p>
<p>Therefore, to enable a software to use <b>ALib</b>, the sources of the library have to become a part of the build process in any form. As usual, there are three possible basic options:</p><ol type="1">
<li>Compiling <b>ALib</b> to a static library,</li>
<li>compiling <b>ALib</b> to a shared library or</li>
<li>compiling <b>ALib</b> sources directly into another software entity.</li>
</ol>
<p>When this manual section talks about "building the ALib library", one of the three options is meant.</p>
<p>The core development of <b>ALib</b> is performed using <a href="https://cmake.org/">CMake</a>. Therefore:</p>
<dl class="section user"><dt></dt><dd><b>The <em>CMake</em> scripts included in the <b>ALib</b> distributions are to be seen as the reference guideline to building <b>ALib</b>.<br />
 The <em>CMake</em> scripts are maybe more precise and up-to-date than this documentation text itself.</b></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Do not hesitate to open and read the CMake files, provided with: <pre class="fragment">  ALIB_BASE_DIR/build/cmake/ALib.cmake
  ALIB_BASE_DIR/build/cmake/ALox.cmake
</pre> </dd>
<dd>
They are well documented and may contain some first hints if problems arise - even to developers that use a different build system than <em>CMake!</em>.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Microsoft Visual Studio solution and project files which build an <b>ALib</b> DLL and the unit tests, are included in the <b>ALib</b> distribution. These may be used to compile an <b>ALib</b> library that includes all of <b>ALib</b>, which can be used for own projects.<br />
 Limited library projects that include only a selection of modules of <b>ALib</b> are not provided and thus have to be created if they are desired.</dd></dl>
<h1><a class="anchor" id="alib_man_setup_test"></a>
2. Performing A Test Compilation</h1>
<p>Clone the <b>ALib</b> repository from <a href="https://github.com/AlexWorx/ALib-Class-Library">ALib at GitHub</a> to a place where you commonly store 3rd party libraries that your projects are using. Alternatively, download and unpack the ZIP file.</p>
<p>We call this place the <b><em>ALIB_BASE_DIR</em></b>. After a fresh installation, it should contain at least the following subfolders: </p><pre class="fragment">    ALIB_BASE_DIR/build
    ALIB_BASE_DIR/docs
    ALIB_BASE_DIR/html
    ALIB_BASE_DIR/src
    ALIB_BASE_DIR/tools
</pre><p>To build the unit tests, perform the following steps:</p>
<ul>
<li>open a console window and cd into directory: <pre class="fragment">  ALIB_BASE_DIR/build/cmake/unittests
</pre></li>
<li>create two sub-directories from here, one named <em>debug</em> and the other <em>release</em></li>
<li>cd into directory <em>debug</em> and type <pre class="fragment">  cmake ..
</pre></li>
<li>once <em>CMake</em> has run, type <pre class="fragment">  make -j
</pre></li>
</ul>
<p>The compiled sample executable should have been created and you can start it with </p><pre class="fragment">./ALib_UT
</pre><p>Within a few seconds all unit tests should have been performed.</p>
<p>For a <b>release build</b>, the steps are similar. After you cd into the 'release' folder, the cmake command is: </p><pre class="fragment">cmake -DCMAKE_BUILD_TYPE=Release ..
</pre><dl class="section note"><dt>Note</dt><dd>For the unit tests, <em>Google</em> <em>gtest</em> gets downloaded (once) and incorporated as a source project within the binary folder. This means:<ul>
<li>This library does not need to be installed anywhere else on the system</li>
<li>This library gets deleted when deleting the CMake build folder (in the sample above named "debug" respectively "release").</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="alib_man_setup_sample"></a>
3. A Step-By-Step CMake Sample</h1>
<p>With using <em>CMake</em>, compiling and using <b>ALib</b> is very straight forward. Ths is because an easy to use <em>CMake</em> script is provided, which is to be included into the main <em>CMake</em> script.</p>
<p>The following demonstrates this step by step along the sample project found in folder </p><pre class="fragment">    ALIB_BASE_DIR/src/samples/alox
</pre><p><br />
 <b>Step 1: Creating the CMake file</b><br />
 A custom <em>CMake</em> file has to be created. To start with, the top of the file might look like this:</p>
<div class="fragment"><div class="line">    project(<span class="stringliteral">&quot;ALox.Samples&quot;</span>)</div><div class="line">    cmake_minimum_required( VERSION 3.1.0 )</div></div><!-- fragment --><p> <br />
 <b>Step 2: Choose ALib Modules</b><br />
 The list of <b>ALib</b> modules to be included in the built is defined with <em>CMake</em> variable <code>ALIB_MODULES</code> which has to be set prior to invoking the <b>ALib</b> <em>CMake</em> script. If the variable is left empty, it will be defaulted to <b>"ALL"</b>, which chooses all <b>ALib</b> modules available.<br />
 In our sample, we add <b>"ALOX"</b>, which chooses module <a class="el" href="namespaceaworx_1_1lib_1_1lox.html">ALox</a> and all dependent modules (Configuration, Core, Strings and Boxing):</p>
<div class="fragment"><div class="line">    list( APPEND  ALIB_MODULES             <span class="stringliteral">&quot;ALOX&quot;</span>       )</div></div><!-- fragment --><p><br />
 <b>Step 3: Set Other Feature Variables</b><br />
 Our project should be compiled using C++ 11. This is set with:</p>
<div class="fragment"><div class="line">    list( APPEND  ALIB_COMPILER_FEATURES   <span class="stringliteral">&quot;cxx_std_11&quot;</span> )</div></div><!-- fragment --><p><br />
 <b>Step 4: Include "ALib.cmake" </b><br />
 Now we are ready to include the main <b>ALib</b> <em>CMake</em> script:</p>
<div class="fragment"><div class="line">    include( ${CMAKE_CURRENT_LIST_DIR}/../../<a class="code" href="namespaceaworx.html#a64f75e0bd4cad92e475ad9a92812ecf9">ALib</a>.cmake )</div></div><!-- fragment --><p> Note that this sample is using a relative path. In a real-world sample, the path might as well be an absolute one. After the script is run, some global <em>CMake</em> variables and functions are defined. All of those are documented in the next section:</p>
<p><br />
 <b>Step 5: Define A Library Project </b><br />
 We invoke <em>CMake</em> function <code>ALibAddSharedLibrary</code>, which creates a <em>CMake</em> target called <code>"ALib_SharedLib"</code> having all necessary settings:</p>
<div class="fragment"><div class="line">    ALibAddSharedLibrary()</div></div><!-- fragment --><p> <br />
 <b>Step 6: Define The Custom Project </b><br />
 Now we are good to define our custom project in a usual way:</p>
<div class="fragment"><div class="line">    add_executable            ( ALoxSamples   ${ALIB_BASE_DIR}/src/samples/<a class="code" href="namespaceaworx.html#af9d44d8ad66d25315fb6deb981162a0f">ALox</a>/sample.cpp  )</div></div><!-- fragment --><p> <br />
 <b>Step 7: Add Compiler And Linker Settings</b><br />
 Our main project needs to share some <b>ALib</b> compiler and linker settings with the <b>ALib</b> library project. To achieve this we invoke <em>CMake</em> function <code>ALibSetCompilerAndLinker</code>:</p>
<div class="fragment"><div class="line">    ALibSetCompilerAndLinker  ( ALoxSamples )</div></div><!-- fragment --><p> <br />
 <b>Step 8: Add Library Project To Custom Project</b><br />
 The final step is to add the library project to the custom sample project, which is again a standard <em>CMake</em> task:</p>
<div class="fragment"><div class="line">    target_link_libraries     ( ALoxSamples   ALib_SharedLib  )</div></div><!-- fragment --><p>That's it. With this simple CMake file we have created a tailored <b>ALib</b> library project and have linked this to our sample project. This is ready to be built!</p>
<h1><a class="anchor" id="alib_man_setup_cmake"></a>
4. The Build Process In Detail</h1>
<p>The previous chapter demonstrated the use of the <em>CMake</em> script <code>ALib.cmake</code> provided with <b>ALib</b>. In the following sections a reference documentation on all aspects of the script is given.</p>
<p>Along these lines, the build requirements of <b>ALib</b> is explained - also for users of any other build system. Independent from the system used, the following information has to be collected and accordingly set with the different build tools use:</p>
<ul>
<li>The set of <b>ALib</b> source files needed that comprise the desired set of <a class="el" href="alib_man_intro.html">ALib Modules</a>.</li>
<li>C++ Version 11 or higher (to be set with the compiler).</li>
<li>Compilation symbols that select the <a class="el" href="alib_man_intro.html">ALib Modules</a> have to be passed to the compiler.</li>
<li>Compilation symbols that choose <b>ALib</b> features have to be passed to the compiler.</li>
<li>External library dependencies have to be determined.</li>
<li>Linker flags have to be defined.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The complete set of compilation symbols that the <b>ALib</b> library accepts from the compiler (usually <em>-D</em> option) are <a class="el" href="group__GrpALibCompilerSymbols.html">documented here</a>.</dd></dl>
<h2><a class="anchor" id="alib_man_setup_cmake_1"></a>
4.1  Selecting ALib Modules</h2>
<p><em>CMake</em> variable <code>ALIB_MODULES</code> is an input/output list which defines the particular <a class="el" href="alib_man_intro.html">ALib Modules</a> that should be included in the built. The script will process the values given and extend the list to include all necessary dependent modules.</p>
<p>The values correspond to the module names, in upper case letters. As of the time of writing this documentation, the list of valid module names is <b>SINGLETON</b>, <b>BOXING</b>, <b>STRINGS</b>, <b>CORE</b>, <b>CONFIGURATION</b>, <b>ALOX</b>, <b>CLI</b> and <b>EXPRESSIONS</b>.</p>
<p>The script will resolve any dependencies. For example if module <b>CONFIGURATION</b> is given in the list, it is assured that modules <b>STRINGS</b>, <b>BOXING</b> and <b>SINGLETON</b> are included as well.</p>
<p>Furthermore, special name <b>"ALL"</b> will choose all modules.</p>
<h2><a class="anchor" id="alib_man_setup_cmake_2"></a>
4.2  Variables For Directory and Source Code Definitions</h2>
<p>This following <em>CMake</em> variables are available after the invocation of the script:</p><ul>
<li><code>ALIB_BASE_DIR</code> <br />
 Defines the directory where the <b>ALib</b> project is stored. (Note: The directory is inferred from the full path information of script invoked.) </li>
</ul>
<ul>
<li><code>ALIB_SOURCE_DIR</code> <br />
 Defines the directory where the <b>ALib</b> source files are stored. The header files are located in the same directories. </li>
</ul>
<ul>
<li><code>ALIB_SOURCE_FILES</code> <br />
 The list of source files (compilation units) needed to compile <b>ALib</b>. </li>
</ul>
<ul>
<li><code>ALIB_INCLUDE_FILES</code> <br />
 The list of header files needed to compile <b>ALib</b>.</li>
</ul>
<p>Variables <code>ALIB_BASE_DIR</code>, <code>ALIB_SOURCE_DIR</code> and <code>ALIB_SOURCE_FILES</code> may be set prior to invoking the script. If done so, they are not overwritten.</p>
<dl class="section note"><dt>Note</dt><dd>For none<em>CMake</em> users, the selection of the exact minimum set of source and header files, is probably the most difficult (and annoying) task. In <em>CMake</em> we have separated the source selection into script: <pre class="fragment">      ALIB_BASE_DIR/build/cmake/ALibSources.cmake
</pre> </dd>
<dd>
which is invoked by the main script.</dd>
<dd>
This script might be analysed to identify the source and header file dependencies of the different <a class="el" href="alib_man_intro.html">ALib Modules</a>.</dd>
<dd>
Likewise, script <pre class="fragment">      ALIB_BASE_DIR/build/cmake/ALibModules.cmake
</pre> </dd>
<dd>
might be analysed to get actual (and correct) information about module dependencies.</dd></dl>
<h2><a class="anchor" id="alib_man_setup_cmake_3"></a>
4.3  Cached CMake Variables For Compilation Symbols</h2>
<p>The script will create a set of cached boolean <em>CMake</em> variables (which are variables that can be edited with CMake GUI tools and various C++ IDEs).</p>
<p>The following variables correspond directly to <a class="el" href="group__GrpALibCompilerSymbols.html">ALib Compilation Symbols</a>:</p>
<ul>
<li>ALIB_AVOID_ANALYZER_WARNINGS</li>
<li>ALIB_COVERAGE_COMPILE</li>
<li>ALIB_DEBUG</li>
<li>ALIB_DEBUG_GLIB</li>
<li>ALIB_DEBUG_STRINGS</li>
<li>ALIB_GDB_PP_FIND_POINTER_TYPES</li>
<li>ALIB_GDB_PP_SUPPRESS_CHILDREN</li>
<li>ALIB_FEAT_BOOST_REGEX</li>
<li>ALIB_FEAT_BOXING_FTYPES</li>
<li>ALIB_FEAT_BOXING_STD_VECTOR</li>
<li>ALIB_FEAT_SINGLETON_MAPPED</li>
<li>ALIB_FEAT_THREADS</li>
<li>ALIB_FORCE_NARROW_STRINGS</li>
<li>ALIB_FORCE_WIDE_STRINGS</li>
<li>ALOX_DBG_LOG</li>
<li>ALOX_DBG_LOG_CI</li>
<li>ALOX_REL_LOG</li>
<li>ALOX_REL_LOG_CI</li>
</ul>
<p>In addition, the following further cached variables are set:</p><ul>
<li><b>ALIB_CMAKE_COTIRE</b><br />
 Defines if <a class="el" href="alib_man_setup.html#alib_man_setup_cotire">Cotire</a> is to be used for the built. </li>
</ul>
<ul>
<li><p class="startli"><b>ALIB_VERSION</b><br />
 Defines the <b>ALib</b> library version. This variable can not be changed, respectively will be overwritten on <em>CMake</em> generation. It is specified as a cached <em>CMake</em> variable just for the reason of presenting the <b>ALib</b> version to tools that allow to modify <em>CMake</em> settings.</p>
<p class="startli">Furthermore, non-cached version variables <code>ALIB_VERSION_NO</code> and <code>ALIB_VERSION_REV</code> are set which hold the version number and revision number as separate integral values.</p>
</li>
</ul>
<h2><a class="anchor" id="alib_man_setup_cmake_4"></a>
4.4  CMake Build-Setting Variables</h2>
<p>The script will create the following non-cached <em>CMake</em> variables, which can be used to define built settings of custom projects:</p>
<ul>
<li><b>ALIB_COMPILATION_SYMBOLS</b><br />
 Will contain the <a class="el" href="group__GrpALibCompilerSymbols.html">ALib Compilation Symbols</a>, as defined by the cached variables. This variable can for example be used as a parameter to <em>CMake</em> function <code>target_compile_definitions()</code>. </li>
</ul>
<ul>
<li><b>ALIB_COMPILER_WARNINGS</b><br />
 Will contain compiler parameters to set the warning level used with compiling <b>ALib</b>. This variable can for example be used as a parameter to <em>CMake</em> function <code>target_compile_options()</code>. </li>
</ul>
<ul>
<li><b>ALIB_COMPILE_FLAGS</b><br />
 Will contain parameters to be passed to the compiler when linking <b>ALib</b>. This variable can for example be used as a parameter to <em>CMake</em> function <code>target_compile_options()</code>. </li>
</ul>
<ul>
<li><b>ALIB_LINKER_FLAGS</b><br />
 Will contain parameters to be passed to the linker when linking <b>ALib</b>. This variable can for example be used as a parameter to <em>CMake</em> function <code>set_target_properties()</code>. </li>
</ul>
<ul>
<li><b>ALIB_EXTERNAL_LIBS</b><br />
 Will contain a list of external libraries needed to build <b>ALib</b>. This variable can for example be used as a parameter to <em>CMake</em> function <code>target_link_libraries()</code>.</li>
</ul>
<p>In addition, the following non-cached variable is an input variable which may be set prior to invoking the script:</p>
<ul>
<li><b>ALIB_COMPILER_FEATURES</b><br />
 May contain <em>CMake</em> feature parameters to be passed to the compiler. This variable can for example be used as a parameter to <em>CMake</em> function <code>target_compile_features()</code>.</li>
</ul>
<h2><a class="anchor" id="alib_man_setup_cmake_5"></a>
4.5  CMake Functions Defined By The Script</h2>
<p>The script will define the following <em>CMake</em> functions:</p>
<ul>
<li><b>ALibAddStaticLibrary</b><br />
 This parameterless function creates a static library target called <code>ALib_StaticLib</code>. </li>
</ul>
<ul>
<li><b>ALibAddSharedLibrary</b><br />
 This parameterless function creates a shared library (under Windows OS a DLL) target called <code>ALib_SharedLib</code>. </li>
</ul>
<ul>
<li><b>ALibSetCompilerAndLinker( target )</b><br />
 This function applies the settings of all variables listed in the previous section to the given <span>target</span>. In addition, the <em>target's</em> CMake property <code>POSITION_INDEPENDENT_CODE</code> is switched on.</li>
</ul>
<h2><a class="anchor" id="alib_man_setup_cmake_6"></a>
4.6  Library Filename</h2>
<p>The library's filename is determined by <em>CMake</em> variable <code>ALIB_LIBRARY_FILENAME</code>. The name is used with functions <code>ALibAddStaticLibrary</code> and <code>ALibAddSharedLibrary</code>, introduced in the previous section.</p>
<p>Same as with other variables, a value might be set prior to invoking script <code>ALib.cmake</code>. In this case, it will not be modified. If left empty, the name will be assembled according to the following set of rules:</p>
<ul>
<li>The name starts with <code>"alib"</code>. </li>
</ul>
<ul>
<li>The library version is appended, for example <code>"1805R0"</code>. </li>
</ul>
<ul>
<li>In the case of debug compilations, term <code>"_DBG"</code> is appended. </li>
</ul>
<ul>
<li>In the case of module selection <b>ALL</b>, no further rule applies. Otherwise an underscore character <code>'_'</code> is appended. </li>
</ul>
<ul>
<li><p class="startli">In the case that one or several of the following modules is selected, the corresponding suffixes are added in the following order:</p><ul>
<li>Module <b>EXPRESSIONS</b>, suffix <code>"Expr"</code> </li>
<li>Module <b>CLI</b>, suffix <code>"Cli"</code> </li>
<li>Module <b>ALOX</b>, suffix <code>"Alox"</code> </li>
</ul>
<p class="startli">No further rule is applied. </p>
</li>
<li><p class="startli">In the case that either of the two following modules is selected, the corresponding suffixes are added in the following order:</p><ul>
<li>Module <b>CONFIGURATION</b>, suffix <code>"Cfg"</code> </li>
<li>Module <b>CORE</b>, suffix <code>"Core"</code> </li>
</ul>
<p class="startli">No further rule is applied. </p>
</li>
<li>In the case that either of the two following modules is selected, the corresponding suffixes are added in the following order:<ul>
<li>Module <b>STRINGS</b>, suffix <code>"Str"</code> </li>
<li>Module <b>BOXING</b>, suffix <code>"Box"</code> </li>
<li>Module <b>SINGLETON</b>, suffix <code>"Sng"</code> </li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="alib_man_setup_more"></a>
5. More Information</h1>
<h2><a class="anchor" id="alib_man_setup_compat"></a>
5.1 Assuring Compilation Compatibility</h2>
<p>It is important to understand that an <b>ALib</b> library compiled with a certain set of options might be incompatible to compilation units that use a different set of options. For example, the footprint (size) of library types might be different.</p>
<p>If incompatible compilation units are mixed, often no warning is issued (neither by the compiler nor the linker) and the execution of a process might lead to very strange behaviour which is irritating and hardly to debug.</p>
<p>To detect incompatible compilation settings, method <a class="el" href="classaworx_1_1lib_1_1ALib.html#a4e067ec1883226d1eed79b485be578b2">ALib::CheckCompatibility</a> should be invoked on singleton <a class="el" href="namespaceaworx_1_1lib.html#a82d1f1a7a150abed28776bc5c8df9fa0">ALIB</a> from custom bootstrap code of each custom compilation target that uses <b>ALib</b>. Code for doing so looks like this: </p><pre class="fragment">    aworx::lib::ALIB.CheckCompatibility( ALIB_VERSION, ALIB_COMPILATION_FLAGS );
</pre><p>The trick here is, that the macros provided as parameters contain compilation information. The method compares this information to the contents of the macros at the time of library compilation.</p>
<p>If <em>CMake</em> function <code>ALibSetCompilerAndLinker</code> (see <a class="el" href="alib_man_setup.html#alib_man_setup_cmake_5">4.5 CMake Functions Defined By The Script</a>) is used with a custom target, all settings are guaranteed to be compatible.</p>
<h2><a class="anchor" id="alib_man_setup_cppversion"></a>
5.2 Choosing C++ Language Version</h2>
<p>As demonstrated in the chapter <a class="el" href="alib_man_setup.html#alib_man_setup_sample">A Step-By-Step CMake Sample</a> (Step 3), <em>CMake</em> variable <code>ALIB_COMPILER_FEATURES</code> may be used to determine the C++ language standard for <b>ALib</b> targets and optionally for custom targets (i.e. if function <code>ALibSetCompilerAndLinker</code> is invoked for a custom target).</p>
<p><b>ALib</b> requires C++ language level <code>11</code> as a minimum and is compatible with levels <code>14</code> and <code>17</code>. <b>ALib</b> might perform better with higher language levels.</p>
<p><em>CMake</em> provides other (maybe even more preferable) mechanics to determine/set the C++ language level, which of course may be used alternatively.</p>
<h2><a class="anchor" id="alib_man_setup_copysources"></a>
5.3 Copying The Sources</h2>
<p>If <em>CMake</em> variable <code>ALIB_MODULE_SOURCE_COPY_DIR</code> is set prior to invoking CMake script <code>ALib.cmake</code>, then the source code (compilation units and header files) are copied to the directory specified in the variable. If the variable does not point to a valid directory, an error is raised and the <em>CMake</em> script is stopped.</p>
<p>The files copies represent exactly the files which are needed for compiling the <a class="el" href="alib_man_intro.html">ALib Modules</a>, which are optionally specified with list variable <code>ALIB_MODULES</code> (see <a class="el" href="alib_man_setup.html#alib_man_setup_cmake_1">4.1 Selecting ALib Modules</a>).</p>
<h2><a class="anchor" id="alib_man_setup_cotire"></a>
5.4 Using Cotire To Speed-Up Builds</h2>
<p><a href="https://github.com/sakra/cotire/">Cotire</a> is an open source CMake script which modifies C++ CMake targets in a way to speed up compilation. This is achieved using mainly two techniques: Precompiled header files and so called "unity builds".</p>
<p>The provided CMake script <code>ALib.cmake</code> defines CMake cache variable <code>ALIB_CMAKE_COTIRE</code>. If this variable evaluates to <code>true</code>, then the script downloads <a href="https://github.com/sakra/cotire/">Cotire</a> (once) and includes it. In this case, script <code>ALox.cmake</code> applies cotire to the library targets created with <b>ALibAddStaticLibrary</b> and <b>ALibAddSharedLibrary</b>. To use cotire with custom targets, <em>CMake</em> function <em>ALibSetCotire</em> is defined.</p>
<p>To benefit from the unity build option (which may cut build time quite dramatically!), you have two options:</p><ol type="1">
<li><p class="startli">Setup your target to use project <code>ALox_SharedLib_unity</code> instead of <code>ALox_SharedLib</code> (respectively <code>ALox_StaticLib_unity</code> instead of <code>ALox_StaticLib</code>). This should be done depending on the setting of the CMake variable, as shown in the following sample:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># link against unity-built version of library in case of cotire</span></div><div class="line"><span class="keywordflow">if</span>( ${ALIB_CMAKE_COTIRE} )</div><div class="line">    target_link_libraries     ( dot   ALib_StaticLib_unity  )</div><div class="line"><span class="keywordflow">else</span>()</div><div class="line">    target_link_libraries     ( dot   ALib_StaticLib        )</div><div class="line">endif()</div></div><!-- fragment --></li>
<li>Use cotire for your project as well and then choose the new make target with suffix "_unity" for building. This target will automatically use the "_unity" target version of the <b>ALox</b> library as well. This second approach is used in the provided <b>ALoxSample</b> project and CMake file.</li>
</ol>
<p>By default, <a href="https://github.com/sakra/cotire/">Cotire</a> is switched off in the make files provided. This is because it adds a next layer of complexity for compiling <b>ALib/ALox</b>. But it is generally worth to have a try! </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat May 12 2018 15:57:46 for ALib by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
